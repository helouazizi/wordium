{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://362851ba8ac2:3001","description":"Generated server url"}],"tags":[{"name":"Admin - Posts Management","description":"Admin endpoints for managing user posts"},{"name":"Admin - Reports Management","description":"Admin endpoints for viewing and managing user reports on posts/users"},{"name":"Followers - Management","description":"Followers endpoints"},{"name":"Admin - Accounts Management","description":"Admin endpoints for managing user accounts"},{"name":"Users - Management","description":"Users endpoints"}],"paths":{"/users/{targetUserId}/follow":{"post":{"tags":["Followers - Management"],"summary":"Follow a User","description":"Follow a user profile using targetUserId as PathVariable","operationId":"follow","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"targetUserId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User Followed successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FollowResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/me":{"get":{"tags":["Users - Management"],"summary":"Get session profile","description":"Fetch a session profile using id from header ","operationId":"getSessionProfile","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsersResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}},"patch":{"tags":["Users - Management"],"summary":"Update User profile","description":"Update User profile using id from header ","operationId":"upadteProfile","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileRequest"}}},"required":true},"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"User profile updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsersResponse"}}}}}}},"/users/admin/reports/{id}/resolve":{"patch":{"tags":["Admin - Reports Management"],"summary":"Resolve a report","description":"Mark a report as resolved. Typically done after taking action (e.g., deleting post, banning user).","operationId":"resolveReport","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Report not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Report resolved successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ReportPostResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/posts/{id}/unflag":{"patch":{"tags":["Admin - Posts Management"],"summary":"Unflag a post","description":"Remove the flagged status from a post.","operationId":"unflagPost","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Post unflagged successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostResponse"}}}},"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/posts/{id}/flag":{"patch":{"tags":["Admin - Posts Management"],"summary":"Flag a post","description":"Mark a post as flagged (e.g., for review, hiding, or warning). Toggles or sets flagged = true.","operationId":"flagPost","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Post flagged successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/accounts/{id}/unban":{"patch":{"tags":["Admin - Accounts Management"],"summary":"Unban a user","description":"Remove ban from a user account by ID. Sets the banned flag to false.","operationId":"unbanAccount","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"User unbanned successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Users"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/accounts/{id}/role":{"patch":{"tags":["Admin - Accounts Management"],"summary":"Change user role","description":"Update the role of a user (e.g., USER → MODERATOR → ADMIN). Requires a JSON body with the new role.","operationId":"changeRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleChangeRequest"}}},"required":true},"responses":{"403":{"description":"Forbidden - Not an admin or insufficient privileges","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Role changed successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Users"}}}},"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"400":{"description":"Invalid role provided","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/accounts/{id}/ban":{"patch":{"tags":["Admin - Accounts Management"],"summary":"Ban a user","description":"Ban a user account by ID. Sets the banned flag to true.","operationId":"banAccount","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"User banned successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Users"}}}},"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/{userId}":{"get":{"tags":["Users - Management"],"summary":"Get User profile for all kind of users ","description":"Fetch a user profile using id as param","operationId":"getUserProfile","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsersResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/{userId}/followers":{"get":{"tags":["Followers - Management"],"summary":"Get a User followers","description":"Get a User followers as list  using userId as PathVariable","operationId":"followers","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"User followers fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UsersResponse"}}}}}}},"/users/me/followers":{"get":{"tags":["Followers - Management"],"summary":"Get a Session followers","description":"Get a Session followers using id from request header","operationId":"sessionFollowers","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"followers fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FollowResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/reports":{"get":{"tags":["Admin - Reports Management"],"summary":"List all reports","description":"Retrieve all reports with optional filters: by reported user, post, or content type (POST, USER, COMMENT).","operationId":"getAllReports","parameters":[{"name":"paginationRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PaginationRequest"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Reports fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ReportPostResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/reports/{id}":{"get":{"tags":["Admin - Reports Management"],"summary":"Get report details by ID","description":"Retrieve full details of a specific report.","operationId":"getReportById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Report not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Report fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ReportPostResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}},"delete":{"tags":["Admin - Reports Management"],"summary":"Delete a report","description":"Permanently delete a report (e.g., if it was a false report or already handled externally).","operationId":"deleteReport","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Report not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"204":{"description":"Report deleted successfully"}}}},"/users/admin/posts":{"get":{"tags":["Admin - Posts Management"],"summary":"List all posts","description":"Retrieve a list of all posts in the system. Accessible only to admins.","operationId":"getAllPosts","parameters":[{"name":"paginationRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PaginationRequest"}}],"responses":{"200":{"description":"Posts fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostResponse"}}}},"401":{"description":"Unauthorized - Invalid or missing token","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Forbidden - User is not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/posts/{id}":{"get":{"tags":["Admin - Posts Management"],"summary":"Get post by ID","description":"Retrieve detailed information about a specific post using its ID.","operationId":"getPostById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Post fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostResponse"}}}}}},"delete":{"tags":["Admin - Posts Management"],"summary":"Delete a post","description":"Permanently delete a post by its ID. Only admins can perform this action.","operationId":"deletePost","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"204":{"description":"Post deleted successfully"}}}},"/users/admin/accounts":{"get":{"tags":["Admin - Accounts Management"],"summary":"List all user accounts","description":"Retrieve a list of all user accounts. Supports optional filtering by active/banned status (currently disabled in code).","operationId":"getAllAccounts","responses":{"200":{"description":"Accounts fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Users"}}}},"401":{"description":"Unauthorized - Invalid or missing token","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Forbidden - User is not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/users/admin/accounts/{id}":{"get":{"tags":["Admin - Accounts Management"],"summary":"Get user account by ID","description":"Retrieve detailed information about a specific user account.","operationId":"getAccountById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Account fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Users"}}}},"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}},"delete":{"tags":["Admin - Accounts Management"],"summary":"Delete a user account","description":"Permanently delete a user account by ID. Use with caution.","operationId":"deleteAccount","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"403":{"description":"Forbidden - Not an admin","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"Account not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"204":{"description":"Account deleted successfully"}}}},"/users/{targetUserId}/unfollow":{"delete":{"tags":["Followers - Management"],"summary":"Unfollow a User","description":"Unfollow a user profile using targetUserId as PathVariable","operationId":"unfollow","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"targetUserId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"404":{"description":"User not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"User Unfollowed successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FollowResponse"}}}}}}}},"components":{"schemas":{"FollowResponse":{"type":"object","properties":{"message":{"type":"string"}}},"ProblemDetail":{"type":"object","properties":{"type":{"type":"string","format":"uri"},"title":{"type":"string"},"status":{"type":"integer","format":"int32"},"detail":{"type":"string"},"instance":{"type":"string","format":"uri"},"properties":{"type":"object","additionalProperties":{"type":"object"}}}},"UpdateProfileRequest":{"type":"object","properties":{"email":{"type":"string"},"username":{"type":"string","maxLength":30,"minLength":6},"bio":{"type":"string","maxLength":300,"minLength":0},"avatarUrl":{"type":"string","maxLength":500,"minLength":0},"location":{"type":"string","maxLength":300,"minLength":0}}},"UsersResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"role":{"type":"string"},"email":{"type":"string"},"username":{"type":"string"},"bio":{"type":"string"},"avatar":{"type":"string"},"location":{"type":"string"}}},"ReportPostResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"reporter":{"$ref":"#/components/schemas/UserProfile"},"reportedPostId":{"type":"integer","format":"int64"},"reason":{"type":"string"},"resolved":{"type":"boolean"},"resolvedAt":{"type":"string","format":"date-time"},"createdAt":{"type":"string","format":"date-time"}}},"UserProfile":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"role":{"type":"string"},"email":{"type":"string"},"username":{"type":"string"},"bio":{"type":"string"},"avatar":{"type":"string"},"location":{"type":"string"}}},"PostImageResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"url":{"type":"string"},"altText":{"type":"string"},"displayOrder":{"type":"integer","format":"int32"}}},"PostResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"content":{"type":"string"},"actor":{"$ref":"#/components/schemas/UserProfile"},"images":{"type":"array","items":{"$ref":"#/components/schemas/PostImageResponse"}},"likesCount":{"type":"integer","format":"int64"},"commentsCount":{"type":"integer","format":"int64"},"reportsCount":{"type":"integer","format":"int64"},"isReported":{"type":"boolean"},"isFlagged":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"Users":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"role":{"type":"string"},"email":{"type":"string"},"username":{"type":"string"},"active":{"type":"boolean"},"banned":{"type":"boolean"},"bio":{"type":"string"},"location":{"type":"string"},"avatarUrl":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"RoleChangeRequest":{"type":"object","properties":{"role":{"type":"string"}}},"PaginationRequest":{"type":"object","properties":{"page":{"type":"integer","format":"int32","minimum":0},"size":{"type":"integer","format":"int32","minimum":1},"sortBy":{"type":"string"},"sortDir":{"type":"string"}}}}}}