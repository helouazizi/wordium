{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://80688e59f563:3003","description":"Generated server url"}],"tags":[{"name":"Reports","description":"Public endpoints for reporting posts"},{"name":"Posts","description":"Public endpoints for posts, reactions, and comments"}],"paths":{"/posts":{"get":{"tags":["Posts"],"summary":"Get paginated posts feed","description":"Returns a paginated list of posts. Supports page, size, sortBy, and sortDir query parameters.","operationId":"getFeed","parameters":[{"name":"paginationRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PaginationRequest"}}],"responses":{"200":{"description":"Posts fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"400":{"description":"Invalid pagination parameters","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}},"post":{"tags":["Posts"],"summary":"Create a new post","operationId":"createPost","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/PostRequest"}}}},"responses":{"201":{"description":"Post created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"400":{"description":"Invalid request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/posts/{id}/reports":{"post":{"tags":["Reports"],"summary":"Create a report","description":"Allows a  to report a post or another . Duplicate reports with the same reason are not allowed.","operationId":"createReport","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReportRequest"}}},"required":true},"responses":{"200":{"description":"Report created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ReportPostResponse"}}}},"400":{"description":"Invalid request or duplicate report","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/posts/{id}/react":{"post":{"tags":["Posts"],"summary":"React to a post (like/unlike)","operationId":"react","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostReactionRequest"}}},"required":true},"responses":{"204":{"description":"Reaction processed successfully"},"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"400":{"description":"Invalid reaction","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/posts/{id}/comments":{"get":{"tags":["Posts"],"summary":"Get all comments for a post (paginated)","operationId":"getComments","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"paginationRequest","in":"query","required":true,"schema":{"$ref":"#/components/schemas/PaginationRequest"}}],"responses":{"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Comments fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}}}},"post":{"tags":["Posts"],"summary":"Create a comment on a post","operationId":"createComment","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentRequest"}}},"required":true},"responses":{"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"201":{"description":"Comment created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommentResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"400":{"description":"Invalid request","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}},"/posts/{id}":{"get":{"tags":["Posts"],"summary":"Get post by ID","operationId":"getPost","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"404":{"description":"Post not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"200":{"description":"Post fetched successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostResponse"}}}}}}},"/posts/{id}/comments/{commentId}":{"delete":{"tags":["Posts"],"summary":"Delete a comment","operationId":"deleteComment","parameters":[{"name":"User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"commentId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Comment deleted successfully"},"404":{"description":"Comment not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}},"403":{"description":"Forbidden - not owner of comment","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProblemDetail"}}}}}}}},"components":{"schemas":{"PostRequest":{"type":"object","properties":{"title":{"type":"string","maxLength":500,"minLength":0},"content":{"type":"string","maxLength":1000,"minLength":0},"files":{"type":"array","items":{"type":"string","format":"binary"}}},"required":["content","title"]},"PostImageResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"url":{"type":"string"},"altText":{"type":"string"},"displayOrder":{"type":"integer","format":"int32"}}},"PostResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"content":{"type":"string"},"actor":{"$ref":"#/components/schemas/UserProfile"},"images":{"type":"array","items":{"$ref":"#/components/schemas/PostImageResponse"}},"likesCount":{"type":"integer","format":"int64"},"commentsCount":{"type":"integer","format":"int64"},"reportsCount":{"type":"integer","format":"int64"},"isReported":{"type":"boolean"},"isFlagged":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"UserProfile":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"role":{"type":"string"},"email":{"type":"string"},"username":{"type":"string"},"bio":{"type":"string"},"avatar":{"type":"string"},"location":{"type":"string"}}},"ProblemDetail":{"type":"object","properties":{"type":{"type":"string","format":"uri"},"title":{"type":"string"},"status":{"type":"integer","format":"int32"},"detail":{"type":"string"},"instance":{"type":"string","format":"uri"},"properties":{"type":"object","additionalProperties":{"type":"object"}}}},"ReportRequest":{"type":"object","properties":{"reason":{"type":"string","maxLength":500,"minLength":0}},"required":["reason"]},"ReportPostResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"reporter":{"$ref":"#/components/schemas/UserProfile"},"reportedPostId":{"type":"integer","format":"int64"},"reason":{"type":"string"},"resolved":{"type":"boolean"},"resolvedAt":{"type":"string","format":"date-time"},"createdAt":{"type":"string","format":"date-time"}}},"PostReactionRequest":{"type":"object","properties":{"reaction":{"type":"string"}}},"CommentRequest":{"type":"object","properties":{"content":{"type":"string","maxLength":500,"minLength":0}},"required":["content"]},"CommentResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"postId":{"type":"integer","format":"int64"},"content":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"actor":{"$ref":"#/components/schemas/UserProfile"}}},"PaginationRequest":{"type":"object","properties":{"page":{"type":"integer","format":"int32","minimum":0},"size":{"type":"integer","format":"int32","minimum":1},"sortBy":{"type":"string"},"sortDir":{"type":"string"}}},"PaginatedResponse":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object"}},"page":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"totalPages":{"type":"integer","format":"int32"},"hasNext":{"type":"boolean"},"hasPrevious":{"type":"boolean"},"isFirst":{"type":"boolean"},"isLast":{"type":"boolean"}}}}}}