<mat-sidenav-container class="sidenav-container" autosize>
  <mat-sidenav
    #drawer
    class="sidenav"
    [mode]="(isHandset$ | async) ? 'over' : 'side'"
    [opened]="!(isHandset$ | async)"
    disableClose="false"
  >
    <div class="sidenav-theme">
      <mat-button-toggle-group
        class="theme-toggle-group"
        [value]="themeService.isDark() ? 'dark' : 'light'"
        (change)="toggleTheme()"
        exclusive
        aria-label="Toggle theme"
      >
        <mat-button-toggle value="light" aria-label="Light mode">
          <mat-icon>light_mode</mat-icon>
        </mat-button-toggle>
        <mat-button-toggle value="dark" aria-label="Dark mode">
          <mat-icon>dark_mode</mat-icon>
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>

    <mat-nav-list>
      @for (link of navLinks; track link.route) {
        <a
          mat-list-item
          [routerLink]="link.route"
          routerLinkActive="active-link"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <mat-icon matListItemIcon>{{ link.icon }}</mat-icon>
          <span matListItemTitle>{{ link.label }}</span>
        </a>
      }
    </mat-nav-list>
  </mat-sidenav>

  <mat-sidenav-content class="content-wrapper">
    <app-header />

    <main class="page-body">
      <router-outlet></router-outlet>
    </main>

    @if (isHandset$ | async) {
      <nav class="mobile-bottom-nav">
        @for (link of navLinks; track link.route) {
          <a
            [routerLink]="link.route"
            routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }"
            class="nav-item"
          >
            <mat-icon>{{ link.icon }}</mat-icon>
          </a>
        }
      </nav>
    }
  </mat-sidenav-content>
</mat-sidenav-container>
